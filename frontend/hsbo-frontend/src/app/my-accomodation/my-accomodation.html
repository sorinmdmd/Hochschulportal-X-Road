<div class="accommodation-container">
  
  <header class="card-header">
    <h2>Meine Buchung</h2>
  </header>

  <div *ngIf="isLoading || errorMessage || (!accommodation && !isLoading)" class="status-container">
    <div *ngIf="isLoading" class="loader"></div>
    <div *ngIf="errorMessage" class="message-box error">
      <p><strong>Fehler:</strong> {{ errorMessage }}</p>
    </div>
    <div *ngIf="!isLoading && !errorMessage && !accommodation" class="message-box info">
      <p>Sie haben aktuell keine Unterkunft gebucht.</p>
    </div>
  </div>

  <div *ngIf="!isLoading && !errorMessage && accommodation" class="accommodation-content">
    
    <section class="details-section">
      <h3>Allgemeine Informationen</h3>
      <div class="details-grid">
        <span class="grid-label">Unterkunfts-ID</span>
        <span class="grid-value">{{ accommodation.id }}</span>

        <span class="grid-label">Studenten-ID</span>
        <span class="grid-value">{{ accommodation.studentId }}</span>

        <span class="grid-label">Mietbeginn</span>
        <span class="grid-value">{{ accommodation.startDate | date:'dd. MMMM yyyy' }}</span>

        <span class="grid-label">Mietende</span>
        <span class="grid-value">{{ accommodation.expiryDate ? (accommodation.expiryDate | date:'dd. MMMM yyyy') : 'Unbefristet' }}</span>
      </div>
    </section>

    <hr class="divider">

    <section class="details-section">
      <h3>Details zur Wohneinheit</h3>
      <div class="details-grid">
        <span class="grid-label">Name</span>
        <span class="grid-value">{{ accommodation.housingUnit.name }}</span>

        <span class="grid-label">Beschreibung</span>
        <span class="grid-value">{{ accommodation.housingUnit.description }}</span>

        <span class="grid-label">Kategorie</span>
        <span class="grid-value">{{ accommodation.housingUnit.category }}</span>

        <span class="grid-label">Adresse</span>
        <span class="grid-value">{{ accommodation.housingUnit.address }}, {{ accommodation.housingUnit.zipCode }} {{ accommodation.housingUnit.city }}</span>
        
        <span class="grid-label">Freie Pl√§tze</span>
        <span class="grid-value">{{ accommodation.housingUnit.freeSpaces }}</span>
      </div>
    </section>

    <footer class="card-footer">
      <button (click)="deleteBooking()" [disabled]="isDeleting" class="delete-button">
        <span *ngIf="!isDeleting">Buchung stornieren</span>
        <span *ngIf="isDeleting">Wird storniert...</span>
      </button>
    </footer>
  </div>
</div>